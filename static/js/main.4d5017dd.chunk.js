(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),o=a.n(c),s=(a(56),a(21)),i=a.n(s),u=a(24),l=a(13),f=a(29),p=a.n(f),b="https://accounts.spotify.com/authorize",m="e06a8e4468034056a35e699e61e7b0cb",d="http://localhost:3000/redirect",h=["user-top-read","user-read-currently-playing","user-read-playback-state"],v=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var j=v,g=(a(80),a(81),a(9)),O=(a(36),a(82),a(45),a(50));function y(e){var t=e.chartData,a=e.artistToGenres;return r.a.createElement("div",{className:"PiChart"},r.a.createElement(O.a,{data:t,options:{plugins:{title:{display:!1,text:"Your Top Genres",color:"#000000"},legend:{display:!0,position:"bottom",labels:{color:"#000000",font:{size:16}}},tooltip:{callbacks:{label:function(e){var t=e.label+": ",n=[];return a.map(function(t){t.genresArr.includes(e.label)&&n.push(t.artistName)}),n.map(function(e){t=t+e+", "}),t=t.substring(0,t.length-2)}}}}}}))}function w(e){var t=e.token,c=Object(n.useState)([]),o=Object(l.a)(c,2),s=o[0],f=o[1],p=Object(n.useState)({}),b=Object(l.a)(p,2),m=(b[0],b[1]),d=a(29),h=(a(99),a(87),a(96),Object(n.useState)({})),v=Object(l.a)(h,2),j=v[0],O=v[1],w=Object(n.useState)(!1),E=Object(l.a)(w,2),k=E[0],N=E[1],S=function(e){if(0===e.length)return-1;for(var t=e[0],a=0,n=1;n<e.length;n++)e[n]>t&&(a=n,t=e[n]);return a};return Object(n.useEffect)(function(){var e=[];(function(){var t=Object(u.a)(i.a.mark(function t(a){var n,r,c,o,s,u,l,p,b,h,v,j,y,w;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={Authorization:"Bearer "+a},t.next=3,d.get("https://api.spotify.com/v1/me/top/artists",{headers:r}).then(function(t){e=t.data.items});case 3:for(c=e.map(function(e,t){var a=e.name;e.images[0].url;return{artistName:a,genresArr:e.genres}}),console.log(c),f(c),o=e.map(function(e,t){return e.genres}),s=(n=[]).concat.apply(n,Object(g.a)(o)),u={},s.map(function(e){u[e]=0}),s.map(function(e){u[e]=u[e]+1}),l=Object.keys(u),p=Object.values(u),b=0,h=[];20!=b&&0!=l.length;)v=S(p),h.push(l[v]),l.splice(v,1),p.splice(v,1),b++;j={},h.map(function(e){j[e]=u[e]}),m(j),y=Object.values(j).reduce(function(e,t){return e+t},0),w={labels:Object.keys(j),datasets:[{label:"Your Top Genres",data:Object.values(j).map(function(e){return Math.round(e/y*100)/100}),backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"white",radius:"100%"}]},O(w),N(!0);case 23:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}})()(t)},[]),k?r.a.createElement("body",{className:"GraphScreen"},r.a.createElement("div",{className:"PiWrapper"},r.a.createElement(y,{chartData:j,artistToGenres:s})),r.a.createElement("table",{className:"TablePi"},s.map(function(e,t){var a=e.artistName,n="thArtist"+t;return console.log(t),r.a.createElement("tr",{className:n},r.a.createElement("th",null,a))}))):r.a.createElement("div",{className:"GraphScreen"},"loading")}a(97),a(98);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(l.a)(o,2),f=(s[0],s[1],Object(n.useState)(!1)),v=Object(l.a)(f,2),g=(v[0],v[1],Object(n.useState)([])),O=Object(l.a)(g,2),y=(O[0],O[1],Object(n.useState)(!1)),E=Object(l.a)(y,2),k=(E[0],E[1],Object(n.useState)("")),N=Object(l.a)(k,2),S=N[0],G=N[1];return Object(n.useEffect)(function(){var e,t=j.access_token;t&&c(t),a&&function(){var t=Object(u.a)(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("try"),n={Authorization:"Bearer "+a},t.next=4,p.a.get("https://api.spotify.com/v1/me",{headers:n}).then(function(t){e=t.data.display_name,G(e)});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[a]),r.a.createElement("div",null,!a&&r.a.createElement("header",{className:"Header"},"Spotify Pie"),!a&&r.a.createElement("header",{className:"Header2"},"Bake Your Genre Pie"),a&&""!==S&&r.a.createElement("header",{className:"Header3"},S,"'s Genre Pie"),r.a.createElement("body",{className:"App-body"},!a&&r.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat(b,"?client_id=").concat(m,"&redirect_uri=").concat(d,"&scope=").concat(h.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"),a&&r.a.createElement(w,{token:a})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},45:function(e,t,a){},51:function(e,t,a){e.exports=a(100)},56:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},97:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},98:function(e,t,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.4d5017dd.chunk.js.map