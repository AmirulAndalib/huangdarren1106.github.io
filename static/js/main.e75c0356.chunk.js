(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},196:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},197:function(e,t,a){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(87),o=a.n(c),s=(a(99),a(25)),l=a.n(s),i=a(36),u=a(13),m=a(45),p=a.n(m),d="https://accounts.spotify.com/authorize",b="e06a8e4468034056a35e699e61e7b0cb",f="https://huangdarren1106.github.io",h=["user-top-read","user-read-currently-playing","user-read-playback-state"],E=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var g=E,v=(a(123),a(124),a(9)),j=(a(51),a(125),a(60),a(93)),w=a(27),y=a(90);function O(e){var t=e.chartData,a=e.artistToGenres;new y.Parser;return r.a.createElement("div",{className:"PiChart"},r.a.createElement("head",null,r.a.createElement(w.a,null,r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}))),r.a.createElement(j.a,{data:t,options:{plugins:{title:{display:!1,text:"Your Top Genres",color:"#000000"},legend:{display:!0,position:"bottom",labels:{padding:6,boxWidth:20,color:"#000000",font:{size:13}}},tooltip:{callbacks:{label:function(e){var t=e.label+": ",n=[];return a.map(function(t){t.genresArr.includes(e.label)&&n.push(t.artistName)}),n.map(function(e){t=t+e+", "}),t=t.substring(0,t.length-2)}}}}}}))}function k(e){var t=e.token,c=Object(n.useState)([]),o=Object(u.a)(c,2),s=o[0],m=o[1],p=Object(n.useState)({}),d=Object(u.a)(p,2),b=(d[0],d[1]),f=a(45),h=(a(200),a(186),a(195),Object(n.useState)({})),E=Object(u.a)(h,2),g=E[0],j=E[1],w=Object(n.useState)(!1),y=Object(u.a)(w,2),k=y[0],N=y[1],x=function(e){if(0===e.length)return-1;for(var t=e[0],a=0,n=1;n<e.length;n++)e[n]>t&&(a=n,t=e[n]);return a};return Object(n.useEffect)(function(){var e=[];(function(){var t=Object(i.a)(l.a.mark(function t(a){var n,r,c,o,s,i,u,p,d,h,E,g,w,y;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={Authorization:"Bearer "+a},t.next=3,f.get("https://api.spotify.com/v1/me/top/artists",{headers:r}).then(function(t){e=t.data.items});case 3:for(c=e.map(function(e,t){return{artistName:e.name,genresArr:e.genres}}),console.log(c),m(c),o=e.map(function(e,t){return e.genres}),s=(n=[]).concat.apply(n,Object(v.a)(o)),i={},s.map(function(e){i[e]=0}),s.map(function(e){i[e]=i[e]+1}),u=Object.keys(i),p=Object.values(i),d=0,h=[];20!=d&&0!=u.length;)E=x(p),h.push(u[E]),u.splice(E,1),p.splice(E,1),d++;g={},h.map(function(e){g[e]=i[e]}),b(g),w=Object.values(g).reduce(function(e,t){return e+t},0),y={labels:Object.keys(g),datasets:[{label:"Your Top Genres",data:Object.values(g).map(function(e){return Math.round(e/w*100)/100}),backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"white",radius:"100%"}]},j(y),N(!0);case 23:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}})()(t)},[]),k?r.a.createElement("body",{className:"GraphScreen"},r.a.createElement("div",{className:"PiWrapper"},r.a.createElement(O,{chartData:g,artistToGenres:s})),r.a.createElement("table",{className:"TablePi"},s.map(function(e,t){var a=e.artistName,n="thArtist"+t;return console.log(t),r.a.createElement("tr",{className:n},r.a.createElement("th",null,a))}))):r.a.createElement("div",{className:"GraphScreen"},"loading")}a(196),a(197),a(86);var N=a(91),x=a.n(N),S=a(92),P=a.n(S),A=a(48);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){Object(A.useMediaQuery)({query:"(min-device-width: 1224px)"});var e=Object(A.useMediaQuery)({query:"(max-width: 1224px)"}),t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)([]),m=Object(u.a)(s,2),E=(m[0],m[1],Object(n.useState)(!1)),v=Object(u.a)(E,2),j=(v[0],v[1],Object(n.useState)([])),y=Object(u.a)(j,2),O=(y[0],y[1],Object(n.useState)(!1)),N=Object(u.a)(O,2),S=(N[0],N[1],Object(n.useState)("")),B=Object(u.a)(S,2),G=B[0],H=B[1];return Object(n.useEffect)(function(){var e,t=g.access_token;t&&o(t),c&&function(){var t=Object(i.a)(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("try"),a={Authorization:"Bearer "+c},t.next=4,p.a.get("https://api.spotify.com/v1/me",{headers:a}).then(function(t){e=t.data.display_name,H(e)});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[c]),r.a.createElement("div",null,r.a.createElement("head",null,r.a.createElement(w.a,null,r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),r.a.createElement("script",{async:!0,src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8437052748107088",crossorigin:"anonymous"}))),!c&&r.a.createElement("header",{className:"Header"},"Spotify Pie"),!c&&r.a.createElement("header",{className:"Header2"},"Bake Your Monthly Genre Pie",r.a.createElement("br",null),r.a.createElement("br",null)),c&&""!==G&&r.a.createElement("header",{className:"Header3"},"Pie of ",G),r.a.createElement("body",{className:"App-body"},!c&&r.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat(d,"?client_id=").concat(b,"&redirect_uri=").concat(f,"&scope=").concat(h.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"),c&&r.a.createElement(k,{token:c}),!c&&e&&r.a.createElement("div",{className:"anthemMobileContainer"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:"https://anthems7h9jk.app.link/xLP1BPdrHqb"},r.a.createElement("img",{src:x.a}))),!c&&!e&&r.a.createElement("div",{className:"anthemDesktopContainer"},r.a.createElement("br",null),r.a.createElement("a",{href:"https://anthems7h9jk.app.link/xLP1BPdrHqb"},r.a.createElement("img",{src:P.a}))),!c&&r.a.createElement("div",{className:"Author-wrapper"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{className:"Author"},"Made by Darren Huang"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{className:"Author"},"Have a message for Pie boy? Send it to him! ^_^"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://www.instagram.com/drnhng/",class:"fa fa-instagram"}))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},60:function(e,t,a){},91:function(e,t,a){e.exports=a.p+"static/media/MobileWebSponsorship.35317ee4.png"},92:function(e,t,a){e.exports=a.p+"static/media/DesktopWebExample.f74d209c.png"},94:function(e,t,a){e.exports=a(201)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.e75c0356.chunk.js.map