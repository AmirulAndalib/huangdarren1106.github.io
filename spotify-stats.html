<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Spotify Stats - View Your Spotify Statistics</title>
  <meta name="description"
    content="Get your Spotify Stats! View your Top Spotify songs, Top Spotify Artists and Chart of your Top Genres">
  <meta name="keywords" content="spotify, spotify stats">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Spotify Stats - View Your Spotify Statistics">
  <meta property="og:description"
    content="Get your Spotify Stats! View your Top Spotify songs, Top Spotify Artists and Chart of your Top Genres">
  <meta property="og:image" content="https://huangdarren1106.github.io/spotify-stats.jpg">
  <meta property="og:url" content="https://huangdarren1106.github.io/spotify-stats">
  <meta property="og:site_name" content="Spotify Stats - View Your Spotify Statistics">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_US">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Spotify Stats - View Your Spotify Statistics">
  <meta name="twitter:description"
    content="Get your Spotify Stats! View your Top Spotify songs, Top Spotify Artists and Chart of your Top Genres">
  <meta name="twitter:image" content="https://huangdarren1106.github.io/spotify-stats.jpg">
  <meta name="twitter:image:alt" content="Spotify Stats - View Your Spotify Statistics">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3@6"></script>
  <script defer data-domain="huangdarren1106.github.io" src="https://stats.senty.com.au/js/script.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3723218062742398"
    crossorigin="anonymous"></script>
  <link rel="canonical" href="https://huangdarren1106.github.io/spotify-stats">
  <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
  <script>
    window.googletag = window.googletag || {};
    googletag.cmd = googletag.cmd || [];
    googletag.cmd.push(function () {
      if (window.innerWidth >= 1024) {
        googletag.defineSlot('/147246189,22921845643/huangdarren1106.github.io_1000x100_desktop_anchor', [[1000, 100], [970, 90], [728, 90], [990, 90], [970, 50], [960, 90], [950, 90], [980, 90]], 'huangdarren1106_github_io_anchor_ad_responsive').addService(googletag.pubads());
      } else {
        googletag.defineSlot('/147246189,22921845643/huangdarren1106.github.io_320x100_mobile_anchor', [[320, 100], [320, 50], [300, 100], [300, 50]], 'huangdarren1106_github_io_anchor_ad_responsive').addService(googletag.pubads());
      }
      var interstitialSlot = googletag.defineOutOfPageSlot('/147246189,22921845643/huangdarren1106.github.io_interstitial', googletag.enums.OutOfPageFormat.INTERSTITIAL);
      if (interstitialSlot) interstitialSlot.addService(googletag.pubads());

      googletag.pubads().enableSingleRequest();
      googletag.pubads().disableInitialLoad();
      googletag.pubads().collapseEmptyDivs();
      googletag.enableServices();
      googletag.display(interstitialSlot);
    });
  </script>
  <script async src="https://stpd.cloud/saas/6406"></script>

  <style>
    .footer {
      background-color: white;
      text-align: center;
      margin-bottom: 20px;
      margin-top: 40px;
      padding-bottom: 20px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .ads {
      text-align: center;
    }
  </style>
</head>

<body x-data="piechart">
  <header class="max-w-3xl mx-auto">
    <div class="flex flex-col sm:flex-row justify-between items-center py-4 px-4 sm:px-0 border-b">
      <a href="/" class="sm:text-2xl font-bold mb-4 sm:mb-0 whitespace-nowrap">Spotify Pie</a>
      <div class="flex justify-center sm:justify-end w-full gap-4 flex-wrap">
        <a href="/" class="">Spotify Pie</a>
        <a href="/playlist-name-generator">Playlist Name Generator</a>
        <a href="/subscribe" class="">Subscribe</a>
      </div>
    </div>
  </header>
  <div class="max-w-3xl mx-auto prose mt-16 mb-16 px-4 sm:px-0">


    <h1>Spotify Stats - View Your Spotify Statistics</h1>

    <img class="w-full rounded" src="your-spotify-stats.jpg" alt="Spotify Stats">

    <div class="text-center w-full border bg-green-50 rounded-lg p-4 border-green-600" x-show="!token">
      <p class="text-lg text-green-800 font-semibold">
        Login with Spotify <br>to see your top tracks and artists.
      </p>
      <button @click="openSpotifyAuthUrl" class="px-6 py-3 bg-green-600 text-white text-xl rounded-full font-bold">Login
        with Spotify</button>
    </div>

    <div>
      <div class="flex justify-center mt-8 mb-8 w-full" x-show="token">
        <button @click="setActiveTab('top_tracks')"
          :class="{ 'bg-blue-500 text-white': activeTab === 'top_tracks', 'bg-gray-200 text-gray-700': activeTab !== 'top_tracks' }"
          class="px-2 py-2 rounded-l">My Top Tracks</button>
        <button @click="setActiveTab('top_artists')"
          :class="{ 'bg-blue-500 text-white': activeTab === 'top_artists', 'bg-gray-200 text-gray-700': activeTab !== 'top_artists' }"
          class="px-2 py-2">My Top Artists</button>
        <button @click="setActiveTab('top_genres')"
          :class="{ 'bg-blue-500 text-white': activeTab === 'top_genres', 'bg-gray-200 text-gray-700': activeTab !== 'top_genres' }"
          class="px-2 py-2 rounded-r">My Top Genres</button>
      </div>
      <div class="flex justify-center mt-8 mb-8 w-full" x-show="token">
        <button @click="setActiveTimeRange('short_term')"
          :class="{ 'bg-blue-500 text-white': time_range === 'short_term', 'bg-gray-200 text-gray-700': time_range !== 'short_term' }"
          class="px-4 py-2 rounded-l">Last 4 Weeks</button>
        <button @click="setActiveTimeRange('medium_term')"
          :class="{ 'bg-blue-500 text-white': time_range === 'medium_term', 'bg-gray-200 text-gray-700': time_range !== 'medium_term' }"
          class="px-4 py-2">Last 6 Months</button>
        <button @click="setActiveTimeRange('long_term')"
          :class="{ 'bg-blue-500 text-white': time_range === 'long_term', 'bg-gray-200 text-gray-700': time_range !== 'long_term' }"
          class="px-4 py-2 rounded-r">All Time</button>
      </div>

      <div class="flex justify-center" x-show="activeTab === 'top_genres'">
        <div id="chart"></div>
      </div>

      <div x-show="top_tracks && activeTab === 'top_tracks'">
        <table class="mt-2 max-w-3xl w-full text-gray-700">
          <tbody class="gap-4 flex flex-col">
            <template x-for="(track, i) in top_tracks.items">
              <tr class="my-0 flex border-0 w-full" x-key="track.name">
                <td x-text="i+1"
                  class="shrink-0 my-0 py-0 text-center w-6 p-0 flex items-center justify-center normal-nums"></td>
                <td class="my-0 shrink-0 p-0 flex items-center">
                  <img class="my-0 w-7 h-7 rounded" :src="track.album.images[0].url" :alt="track.name">
                </td>
                <td
                  class="font-bold shrink-0 my-0 py-0 text-left max-w-[200px] sm:max-w-none leading-none flex items-center">
                  <a target="_blank" :href="track.external_urls.spotify" x-text="track.name"></a>
                </td>
                <td
                  class="w-full my-0 py-0 text-right leading-none whitespace-nowrap truncate flex items-center justify-end">
                  <a x-text="track.artists[0].name" target="_blank" :href="track.artists[0].external_urls.spotify"></a>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>

      <div x-show="top_artists && activeTab === 'top_artists'">
        <table class="mt-2 max-w-3xl w-full text-gray-700">
          <tbody class="gap-4 flex flex-col">
            <template x-for="(artist, i) in top_artists.items">
              <tr class="my-0 flex border-0 w-full" x-key="artist.name">
                <td x-text="i+1"
                  class="shrink-0 my-0 py-0 text-center w-6 p-0 flex items-center justify-center normal-nums"></td>
                <td class="my-0 shrink-0 p-0 flex items-center">
                  <img class="my-0 w-7 h-7 rounded" :src="artist.images[0].url" :alt="artist.name">
                </td>
                <td
                  class="font-bold shrink-0 my-0 py-0 text-left max-w-[200px] sm:max-w-none leading-none flex items-center">
                  <a target="_blank" :href="artist.external_urls.spotify" x-text="artist.name"></a>
                </td>
                <td x-text="artist.genres[0]"
                  class="w-full my-0 py-0 text-right leading-none whitespace-nowrap truncate flex items-center justify-end">
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>

      <p>As a Spotify user, accessing and understanding your listening statistics can provide valuable insights into
        your music habits. Whether you want to explore your top artists, songs, or genres, Spotify offers various tools
        to help you personalize your music experience based on your preferences. On this page you can analyze your
        Stats for Spotify and utilizing the data to enhance your listening journey.</p>

      <h2>How to Access Stats for Spotify </h2>

      <p>By logging into your Spotify account, you can easily view your Spotify Stats on this page, which includes your
        top artists, songs, and genres from the past year.</p>

      <h3>Importance of Understanding Your Spotify Listening Statistics</h3>

      <p>Understanding your Spotify listening statistics can offer valuable insights into your music preferences,
        helping you discover new artists, albums, and genres that align with your taste. By regularly reviewing your
        Spotify stats, you can tailor your listening experience to better reflect your evolving music interests.</p>

      <h2>Top Artists: What It Means and How to Personalize</h2>

      <p>Your top artists on Spotify reflect the musicians and bands you&#39;ve listened to the most. Spotify calculates
        your top artists based on the total listening time attributed to each artist, allowing you to discover the
        musical acts that resonate with you the most. On this page, after you logged in you can select the time range
        from 3 options: Last 4 Weeks, Last 6 Months and All Time.</p>

      <h3>How Spotify Calculates Your Top Artists</h3>

      <p>Spotify calculates your top artists by analyzing the number of times you&#39;ve streamed each artist&#39;s
        tracks and the total duration of your listening sessions for their music. This approach ensures that your top
        artists accurately represent your listening habits.</p>

      <h3>Personalizing Your Top Artists List</h3>

      <p>To personalize your top artists list, consider exploring new artists and albums recommended by Spotify based on
        your current favorites. By diversifying your music library and discovering fresh talents, you can enrich your
        listening experience and potentially add new top artists to your list.</p>

      <h3>Exploring New Artists and Albums Based on Your Top Artists</h3>

      <p>Utilize the &quot;Related Artists&quot; feature on Spotify to discover musicians and bands similar to your top
        artists. Exploring related artists can introduce you to new music that resonates with your preferences,
        expanding your musical horizon beyond your current top artists.</p>

      <h2>Top Songs: Discovering Your Most Listened Tracks</h2>

      <p>Exploring your top songs on Spotify Stats allows you to uncover the tracks that have resonated with you the
        most during a specific period. Your top songs list showcases the individual tracks that have accumulated the
        highest listening time, providing valuable insights into your favorite music. You can select the time range from
        3 options: Last 4 Weeks, Last 6 Months and All Time.</p>

      <h3>Creating Playlists with Your Top Songs</h3>

      <p>Consider creating personalized playlists featuring your top songs to revisit and enjoy your favorite tracks at
        any time. By organizing your top songs into themed playlists, you can tailor your listening experience to
        specific moods, occasions, or musical genres.</p>

      <h2>Spotify Genre Stats: Exploring Your Music Preferences</h2>

      <p>Unveiling your top genres on Spotify provides valuable insights into your music preferences and the styles of
        music that resonate with you the most. By exploring your top genres, you can discover new artists and albums
        within genres that align with your musical taste.</p>

      <h3>How Spotify Identifies Your Top Genres</h3>

      <p>Spotify identifies your top genres based on the collective listening time attributed to each genre within your
        listening history. This approach allows Spotify to recognize the genres that define your music preferences and
        tailor music recommendations accordingly.</p>

      <h3>Diving Deeper into Your Top Genres and build Spotify Charts</h3>

      <p>Delve deeper into your top genres by exploring curated playlists and recommendations within each genre. This
        exploration can lead to the discovery of new and exciting music that aligns with your favorite genres,
        broadening your musical horizons and enriching your listening experience.</p>

      <h3>Utilizing Your Top Genres to Discover New Music</h3>

      <p>Utilize your top genres as a springboard to discover new music that resonates with your musical preferences. By
        leveraging your top genres, you can explore recommended artists, albums, and playlists that align with the
        genres you love, enabling you to continuously expand your music library.</p>

      <h2>Using Spotify Stats to Enhance Your Listening Experience</h2>

      <p>Utilizing your Spotify statistics can significantly enhance your listening experience by helping you tailor
        your music choices and discover new artists and genres that align with your preferences.</p>

      <h3>Customizing Playlists Based on Your Spotify Statistics</h3>

      <p>Customize playlists based on your top artists, songs, and genres, creating curated listening experiences
        tailored to your music taste and mood. This customization allows you to enjoy personalized playlists that
        reflect your unique music preferences.</p>

      <h3>Exploring New Music Based on Your Listening Patterns</h3>

      <p>Explore new music based on your listening patterns, utilizing Spotify&#39;s personalized recommendations and
        related artists to expand your musical repertoire. By embracing new music aligned with your listening habits,
        you can continue to discover fresh and exciting tracks.</p>

      <h3>Advantages of Accessing and Reviewing Your Spotify Stats Regularly</h3>

      <p>Regularly accessing and reviewing your Spotify stats empowers you with insights into your evolving music taste
        and preferences. By staying updated with your Spotify statistics, you can adapt your listening choices and
        explore new music, ensuring that your music journey remains dynamic and fulfilling.</p>



    </div>

    <div class="flex flex-col items-center gap-4 prose my-8 mx-auto max-w-3xl text-sm justify-center px-4 sm:px-0">
      <a href="/">Spotify Pie Chart</a>
      <a href="/spotify-stats">Spotify Stats 2023</a>
      <a href="/trackify">Trackify - Your Spotify Listening Statistics</a>
      <a href="/playlist-name-generator">Playlist Name Generator</a>
      <a href="/generation-names">Generation Names and Years in Order - 2024 Edition</a>
      <a href="/subscribe">New Spotify Pie</a>
    </div>


    <div id="huangdarren1106_github_io_anchor_ad_responsive" class="ads">
      <script>
        googletag.cmd.push(function () {
          googletag.display('huangdarren1106_github_io_anchor_ad_responsive');
        });
      </script>
    </div>

    <script>
      document.addEventListener('alpine:init', () => {
        Alpine.data('piechart', () => ({
          show: false,
          token: null,
          time_range: 'short_term',
          top_tracks: [],
          top_artists: [],
          genresChartData: [],
          activeTab: 'top_tracks',
          setActiveTab(tab) {
            this.activeTab = tab;
            // fetch data depends on activeTab
            if (tab === 'top_tracks') {
              this.getTopTracks(this.time_range);
            } else {
              this.getTopArtists(this.time_range);
            }
          },
          setActiveTimeRange(time_range) {
            this.time_range = time_range;
            if (this.activeTab === 'top_tracks') {
              this.getTopTracks(time_range);
            } else {
              this.getTopArtists(time_range);
            }
          },

          spotifyAuthUrl: 'https://musicpiechart.com/auth/login?embed=true',
          openSpotifyAuthUrl() {
            window.open(this.spotifyAuthUrl, '_blank', 'height=600,width=800');
          },
          onMessage(event) {
            if (event.data.app === 'musicpiechart') {
              this.token = event.data.token;
              localStorage.setItem('token', event.data.token);
              this.getTopTracks(this.time_range);
            }
          },

          getTopTracks(time_range) {
            fetch(`https://api.spotify.com/v1/me/top/tracks?limit=50&time_range=${time_range}`, {
              headers: {
                'Authorization': 'Bearer ' + this.token
              }
            })
              .then(response => {
                if (response.status === 401) {
                  console.log('token expired');
                  throw new Error('token expired');
                } else {
                  return response.json();
                }

              })
              .then(data => {
                this.top_tracks = data;
              }).catch(e => {
                console.log(e);
                this.reset()
              });
          },

          getTopArtists(time_range) {
            fetch(`https://api.spotify.com/v1/me/top/artists?limit=50&time_range=${time_range}`, {
              headers: {
                'Authorization': 'Bearer ' + this.token
              }
            })
              .then(response => {
                if (response.status === 401) {
                  throw new Error('token expired');
                } else {
                  return response.json();
                }

              })
              .then(data => {
                this.top_artists = data;

                this.genresChartData = [];
                const genres = {};
                this.top_artists.items.forEach(artist => {
                  artist.genres.forEach(genre => {
                    if (genres[genre]) {
                      genres[genre] += 1;
                    } else {
                      genres[genre] = 1;
                    }
                  })
                });
                Object.keys(genres).forEach(genre => {
                  this.genresChartData.push({
                    name: genre,
                    value: genres[genre]
                  })
                });
                // sort by value
                this.genresChartData.sort((a, b) => b.value - a.value);
                // filter top 10
                this.genresChartData = this.genresChartData.slice(0, 10);

                // sum of top 10 genres
                const sum = this.genresChartData.reduce((a, b) => a + b.value, 0);

                // add percent to each genre
                this.genresChartData.forEach(genre => {
                  genre.percent = Math.round(genre.value / sum * 100);
                });

                let svg = this.createChartSVG(this.genresChartData)
                document.getElementById('chart').innerHTML = svg.outerHTML;


              }).catch(e => {
                console.log(e);
                this.reset()
              });
          },
          reset() {
            this.token = null;
            localStorage.removeItem('token');
          },

          createChartSVG(data) {
            // Specify the chart’s dimensions.
            const width = 500;
            const height = Math.min(width, 500);

            // Create the color scale.
            const color = d3.scaleOrdinal()
              .domain(data.map(d => d.name))
              .range(d3.quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), data.length).reverse())

            // Create the pie layout and arc generator.
            const pie = d3.pie()
              .sort(null)
              .value(d => d.value);

            const arc = d3.arc()
              .innerRadius(0)
              .outerRadius(Math.min(width, height) / 2 - 1);

            const labelRadius = arc.outerRadius()() * 0.8;

            // A separate arc generator for labels.
            const arcLabel = d3.arc()
              .innerRadius(labelRadius)
              .outerRadius(labelRadius);

            const arcs = pie(data);

            // Create the SVG container.
            const svg = d3.create("svg")
              .attr("width", width)
              .attr("height", height)
              .attr("viewBox", [-width / 2, -height / 2, width, height])
              .attr("style", "max-width: 100%; height: auto; font: 14px sans-serif;");

            // Add a sector path for each value.
            svg.append("g")
              .attr("stroke", "white")
              .selectAll()
              .data(arcs)
              .join("path")
              .attr("fill", d => color(d.data.name))
              .attr("d", arc)
              .append("title")
              .text(d => `${d.data.name}: ${d.data.value.toLocaleString("en-US")}`);

            // Create a new arc generator to place a label close to the edge.
            // The label shows the value if there is enough room.
            svg.append("g")
              .attr("text-anchor", "middle")
              .selectAll()
              .data(arcs)
              .join("text")
              .attr("transform", d => `translate(${arcLabel.centroid(d)})`)
              .call(text => text.append("tspan")
                .attr("y", "-0.4em")
                .attr("font-weight", "bold")
                .text(d => d.data.name))
              .call(text => text.filter(d => (d.endAngle - d.startAngle) > 0.15).append("tspan")
                .attr("x", 0)
                .attr("y", "0.7em")
                .attr("fill-opacity", 0.7)
                .text(d => d.data.percent + "%"));

            return svg.node();

          },

          async init() {
            window.addEventListener('message', this.onMessage.bind(this));
            // read token from local storage
            this.token = localStorage.getItem('token');
            if (this.token) {
              try {
                await this.getTopTracks(this.time_range);
                await this.getTopArtists(this.time_range)
              } catch (e) {
                console.log(e);
                this.reset();
              }

            }
          }
        }));
      });
    </script>

</body>

</html>